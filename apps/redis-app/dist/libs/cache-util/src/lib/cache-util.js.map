{
  "version": 3,
  "sources": ["../../../../../../../libs/cache-util/src/lib/cache-util.ts"],
  "sourcesContent": ["import Redis from 'ioredis';\n\n// Create and export Redis Cluster client\nexport const redisCluster = new Redis.Cluster(\n  [\n    { host: 'localhost', port: 6379 },\n    { host: 'localhost', port: 6380 },\n    { host: 'localhost', port: 6381 },\n  ],\n  {\n    redisOptions: {\n      connectTimeout: 10000,\n    },\n    clusterRetryStrategy: (times) => {\n      const delay = Math.min(100 + times * 2, 2000);\n      return delay;\n    },\n    // Map internal Docker IPs to localhost\n    natMap: {\n      '172.18.0.2:6379': { host: 'localhost', port: 6379 },\n      '172.18.0.3:6380': { host: 'localhost', port: 6380 },\n      '172.18.0.4:6381': { host: 'localhost', port: 6381 },\n    },\n  }\n);\n\n// Handle connection events\nredisCluster.on('connect', () => {\n  console.log('\u2705 Redis Cluster connected');\n});\n\nredisCluster.on('ready', () => {\n  console.log('\u2705 Redis Cluster ready');\n});\n\nredisCluster.on('error', (err) => {\n  console.error('\u274C Redis Cluster Error:', err.message);\n});\n\nredisCluster.on('close', () => {\n  console.log('\uD83D\uDD0C Redis Cluster connection closed');\n});\n\n// Helper function to gracefully close the connection\nexport async function closeRedisCluster(): Promise<void> {\n  try {\n    await redisCluster.quit();\n    console.log('\u2705 Redis cluster connection closed gracefully');\n  } catch (error) {\n    console.error('\u26A0\uFE0F Error closing Redis connection:', error);\n    redisCluster.disconnect();\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAkB;AAGX,MAAM,eAAe,IAAI,eAAAA,QAAM;AAAA,EACpC;AAAA,IACE,EAAE,MAAM,aAAa,MAAM,KAAK;AAAA,IAChC,EAAE,MAAM,aAAa,MAAM,KAAK;AAAA,IAChC,EAAE,MAAM,aAAa,MAAM,KAAK;AAAA,EAClC;AAAA,EACA;AAAA,IACE,cAAc;AAAA,MACZ,gBAAgB;AAAA,IAClB;AAAA,IACA,sBAAsB,CAAC,UAAU;AAC/B,YAAM,QAAQ,KAAK,IAAI,MAAM,QAAQ,GAAG,GAAI;AAC5C,aAAO;AAAA,IACT;AAAA;AAAA,IAEA,QAAQ;AAAA,MACN,mBAAmB,EAAE,MAAM,aAAa,MAAM,KAAK;AAAA,MACnD,mBAAmB,EAAE,MAAM,aAAa,MAAM,KAAK;AAAA,MACnD,mBAAmB,EAAE,MAAM,aAAa,MAAM,KAAK;AAAA,IACrD;AAAA,EACF;AACF;AAGA,aAAa,GAAG,WAAW,MAAM;AAC/B,UAAQ,IAAI,gCAA2B;AACzC,CAAC;AAED,aAAa,GAAG,SAAS,MAAM;AAC7B,UAAQ,IAAI,4BAAuB;AACrC,CAAC;AAED,aAAa,GAAG,SAAS,CAAC,QAAQ;AAChC,UAAQ,MAAM,+BAA0B,IAAI,OAAO;AACrD,CAAC;AAED,aAAa,GAAG,SAAS,MAAM;AAC7B,UAAQ,IAAI,2CAAoC;AAClD,CAAC;AAGD,eAAsB,oBAAmC;AACvD,MAAI;AACF,UAAM,aAAa,KAAK;AACxB,YAAQ,IAAI,mDAA8C;AAAA,EAC5D,SAAS,OAAO;AACd,YAAQ,MAAM,gDAAsC,KAAK;AACzD,iBAAa,WAAW;AAAA,EAC1B;AACF;",
  "names": ["Redis"]
}
